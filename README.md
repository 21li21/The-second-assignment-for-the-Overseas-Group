# assigment2
# å°ç»„åˆ†å·¥æ–¹æ¡ˆ

## æ–‡æ¡£ç»„ï¼ˆ2äººï¼‰

### æå©§æ¶µåŒå­¦
- è´Ÿè´£ç¬¬ä¸€ä¸ªé¡¹ç›®çš„è®¾è®¡æ€è·¯æ–‡æ¡£ï¼ˆ`assignment2.md`ä¸­è®¾è®¡éƒ¨åˆ†ï¼‰
  - ç³»ç»Ÿæ¶æ„è®¾è®¡
  - ä¸»é¢˜å¯é…ç½®åŒ–æ–¹æ¡ˆ
  - æ•°æ®æµè®¾è®¡

### ç”°å˜‰é“­åŒå­¦
- è´Ÿè´£ç¬¬äºŒä¸ªé¡¹ç›®çš„è®¾è®¡æ€è·¯æ–‡æ¡£ï¼ˆ`assignment2.md`ä¸­è®¾è®¡éƒ¨åˆ†ï¼‰
  - ç³»ç»Ÿæ¶æ„è®¾è®¡
  - ä¸»é¢˜å¯é…ç½®åŒ–æ–¹æ¡ˆ
  - æ•°æ®æµè®¾è®¡

---

## ä»£ç ç»„ï¼ˆ4äººï¼Œåˆ†ä¸¤ç»„ï¼‰

### ç¬¬ä¸€ç»„ï¼ˆé¡¹ç›®1ï¼šèƒ–çŒ«è‡ªæ€äº‹ä»¶ï¼‰

#### åˆ˜æ˜Ÿé›¨åŒå­¦
- æ•°æ®é‡‡é›†æ¨¡å—
  - å¯¹æ¥æœç´¢å·¥å…·APIï¼ˆå¦‚serpAPIï¼‰
  - å®ç°å¾®åš/çŸ¥ä¹ç­‰å¹³å°çš„æ•°æ®æŠ“å–

#### éƒ­æ¢“è‰¯åŒå­¦
- å‰ç«¯å¼€å‘
  - å®ç°ä¸»é¢˜é…ç½®ç•Œé¢
  - å±•ç¤ºç›‘æµ‹ç»“æœçš„åŠ¨æ€åˆ—è¡¨

### ç¬¬äºŒç»„ï¼ˆé¡¹ç›®2ï¼šåä¸­å†œå¤§å­¦æœ¯ä¸ç«¯äº‹ä»¶ï¼‰

#### å¼ å›ä»ªåŒå­¦
- å¤§æ¨¡å‹APIå¯¹æ¥
  - ä½¿ç”¨siliconflow.cnæˆ–å…¶ä»–å¤§æ¨¡å‹
  - å®ç°æ–‡æœ¬è¯­ä¹‰åˆ†æã€æƒ…æ„Ÿåˆ†ç±»ç­‰åŠŸèƒ½

#### é’Ÿåœ£æ›¦åŒå­¦
- åç«¯ä¸ç³»ç»Ÿæ•´åˆ
  - æ•´åˆå‰åç«¯æ•°æ®æµ
  - å®Œå–„å¼‚å¸¸å¤„ç†ä¸æµ‹è¯•

---

# é¡¹ç›®ä¸€å¼€å‘è¿‡ç¨‹æ–‡æ¡£è¯´æ˜

## ä¸€ã€å¼€å‘èƒŒæ™¯
é’ˆå¯¹ç½‘ç»œçƒ­ç‚¹äº‹ä»¶ï¼ˆå¦‚"èƒ–çŒ«è‡ªæ€äº‹ä»¶"ï¼‰çš„èˆ†æƒ…åˆ†æéœ€æ±‚ï¼Œå¼€å‘æœ¬å·¥å…·å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š
- ğŸ“¡ å®æ—¶æ•°æ®é‡‡é›†ï¼šæŠ“å–æ–°é—»æ ‡é¢˜ã€å†…å®¹ç­‰å…³é”®ä¿¡æ¯
- ğŸ¤– æƒ…æ„Ÿå€¾å‘åˆ†æï¼šé€šè¿‡å¤§è¯­è¨€æ¨¡å‹ï¼ˆå¦‚DeepSeekï¼‰åˆ¤æ–­èˆ†æƒ…æ­£è´Ÿ
- ğŸš¨ è‡ªåŠ¨åŒ–é¢„è­¦ï¼šè¯†åˆ«æ•æ„Ÿå†…å®¹åè§¦å‘å‘Šè­¦ï¼Œè¾…åŠ©èˆ†æƒ…ç®¡æ§

## äºŒã€æŠ€æœ¯é€‰å‹
| æ¨¡å—          | æŠ€æœ¯æ ˆ                     | ä½œç”¨                          |
|---------------|---------------------------|-------------------------------|
| ç¯å¢ƒç®¡ç†      | Python 3.10 + venvè™šæ‹Ÿç¯å¢ƒ | éš”ç¦»ä¾èµ–                      |
| æ•°æ®é‡‡é›†      | requests + SerpAPI         | çˆ¬å–å…¬å¼€æ–°é—»                  |
| æ•æ„Ÿè¯æ£€æµ‹    | dotenv + ç¯å¢ƒå˜é‡          | å®‰å…¨å­˜å‚¨APIå¯†é’¥               |
| æ·±åº¦åˆ†æ      | DeepSeek API               | æ–‡æœ¬æƒ…æ„Ÿåˆ†ç±»                  |
| å¼€å‘å·¥å…·      | PyCharm + Git              | ä»£ç è°ƒè¯•ä¸ç‰ˆæœ¬æ§åˆ¶            |

## ä¸‰ã€å®ç°æ­¥éª¤å¦‚ä¸‹


pythonProject1/
â”œâ”€â”€ venv/                    # è™šæ‹Ÿç¯å¢ƒ
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ .gitignore           # å¿½ç•¥é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ pydeck.json          # æ•°æ®å¯è§†åŒ–é…ç½®ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ network_monitoring_tool.py  # ä¸»ç¨‹åº
â””â”€â”€ network_monitoring_utils.py # å·¥å…·å‡½æ•°

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶æ¿€æ´»
python -m venv venv
.\venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install requests python-dotenv serpapi

import os
from dotenv import load_dotenv

load_dotenv()  # åŠ è½½ç¯å¢ƒå˜é‡

def get_api_keys():
    """éªŒè¯APIå¯†é’¥æ˜¯å¦å­˜åœ¨"""
    deepseek_key = os.getenv("DEEPSEEK_API_KEY")
    serp_key = os.getenv("SERP_API_KEY")
    if not deepseek_key or not serp_key:
        raise ValueError("è¯·é…ç½® .env æ–‡ä»¶ä¸­çš„ API å¯†é’¥ï¼")
    return deepseek_key, serp_key


import requests
from serpapi import GoogleSearch
from .utils import get_api_keys

# å…¨å±€å˜é‡
EVENT_TOPIC = "èƒ–çŒ«è‡ªæ€äº‹ä»¶"  # å¯é…ç½®åŒ–
MAX_RESULTS = 10  # æœç´¢ç»“æœæ•°é‡

def fetch_news(keyword, num=MAX_RESULTS):
    """æŠ“å–æ–°é—»æ•°æ®"""
    params = {
        "q": keyword,
        "num": num,
        "hl": "zh-CN",
        "api_key": get_api_keys()[1]  # SerpAPIå¯†é’¥
    }
    search = GoogleSearch(params)
    results = search.get_dict()
    return [result["title"] + " " + result["snippet"] for result in results["organic_results"]]

def analyze_sentiment(news_list):
    """æƒ…æ„Ÿåˆ†ææ ¸å¿ƒé€»è¾‘"""
    from deepseek import ChatCompletion  # åŠ¨æ€åŠ è½½é¿å…å¯åŠ¨æŠ¥é”™
    
    deepseek_key, _ = get_api_keys()
    client = ChatCompletion(api_key=deepseek_key)
    
    news_text = "\n".join(news_list)
    response = client.chat.completions.create(
        messages=[
            {"role": "system", "content": "ä½ æ˜¯ä¸€ä¸ªèˆ†æƒ…åˆ†æå¸ˆï¼Œéœ€åˆ¤æ–­ä»¥ä¸‹æ–°é—»å†…å®¹çš„æƒ…æ„Ÿå€¾å‘ï¼ˆæ­£/è´Ÿ/ä¸­ç«‹ï¼‰"},
            {"role": "user", "content": news_text}
        ],
        model="deepseek-chat",
        temperature=0.1
    )
    return response.choices[0].message["content"].strip()
    
def monitor():
    """ä¸»æµç¨‹æ§åˆ¶"""
    print(f"æ­£åœ¨è·å–å…³äº '{EVENT_TOPIC}' çš„æ–°é—»æ•°æ®...")
    news_data = fetch_news(EVENT_TOPIC)
    if not news_data:
        print("æœªæ‰¾åˆ°ç›¸å…³æ–°é—»ã€‚")
        return
    
    sentiment_result = analyze_sentiment(news_data)
    print(f"èˆ†æƒ…è¶‹åŠ¿åˆ†æç»“æœï¼š{sentiment_result}")
    
    if "è´Ÿ" in sentiment_result:
        print("\033[31m[è­¦æŠ¥] æ£€æµ‹åˆ°æ•æ„Ÿèˆ†æƒ…ï¼Œè¯·åŠæ—¶å¤„ç†ï¼\033[0m")

if __name__ == "__main__":
    monitor()


python network_monitoring_tool.py

![301eeb0455d3216f092de73d7511553](https://github.com/user-attachments/assets/e11c2763-098c-4920-90ed-41ce359ae404)











